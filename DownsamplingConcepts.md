# 自适应降采样：三大核心概念详解

为了理清 `SignalFeatures`、`SignalType` 和 `DownsamplingAlgorithm` 三者之间的关系，我们可以用一个**医生看病**的例子来做类比。

---

## 1. 概念类比：医生看病模型

| 概念                        | 对应角色     | 作用             | 举例                |
|:--------------------------|:---------|:---------------|:------------------|
| **SignalFeatures**        | **体检数据** | 原始、客观的量化指标。    | 体温 39℃、血压 120/80。 |
| **SignalType**            | **诊断结论** | 根据指标得出的主观逻辑分类。 | 结论：发烧。            |
| **DownsamplingAlgorithm** | **治疗方案** | 针对该分类执行的具体动作。  | 方案：吃退烧药。          |

---

## 2. 深度解析

### 2.1 SignalFeatures (信号特征) —— "客观测量"

这是算法处理的第一步。代码会从一堆散乱的数据点中，通过数学公式算出一些客观指标。它不带感情色彩，只负责描述数据。

* **指标举例**：
    * `linearity`: 数据像不像直线？（0.0 ~ 1.0）
    * `periodicity`: 数据有没有重复规律？
    * `volatility`: 数据跳动得有多剧烈？
* **用途**：为后续的分类提供数字依据。

### 2.2 SignalType (信号类型) —— "逻辑分类"

这是中转站。代码根据上面的 `SignalFeatures` 指标，做一堆 `if-else` 判断，把信号分到不同的“组”里。

* **分类举例**：
    * **PERIODIC (周期信号)**：如果 `periodicity > 0.55`。
    * **NOISE (噪声信号)**：如果 `volatility > 10` 且 `noiseRatio > 0.5`。
* **用途**：实现语义化管理。我们不再说“那个波动率为 12 的信号”，而说“那个噪声信号”。

### 2.3 DownsamplingAlgorithm (降采样算法) —— "执行动作"

这是最后一步。确定了信号是什么类型后，我们需要选一种最适合它的方法来减少点数。

* **算法举例**：
    * **LTTB**：适合线性或简单的形状，保留线条美。
    * **HYBRID_ENVELOPE**：专门对付周期信号，画出漂亮的包络带。
    * **UNIFORM_WITH_EXTREMES**：专门对付噪声，保证点分布均匀且不丢尖峰。

---

## 3. 一个完整的处理案例

假设有一段来自传感器的原始数据，处理流程如下：

1. **特征提取 (SignalFeatures)**：
    * 计算发现：`periodicity = 0.8` (规律性很强)，`trendSlope = 0.05` (在慢慢变大)。
2. **信号分类 (SignalType)**：
    * 因为周期性强且振幅在增长，分类器判定为：`AMPLITUDE_MODULATED` (调幅信号)。
3. **算法选择 (DownsamplingAlgorithm)**：
    * 决策矩阵看到是调幅信号，决定执行：`HYBRID_ENVELOPE` 算法。
4. **最终输出**：
    * 前端看到一个均匀扩张、实心感很强的波形，既没丢失极值，也没有散漫的杂点。

---

## 4. 总结

* **SignalFeatures** 解决的是 **“数据长什么样？”**（客观）
* **SignalType** 解决的是 **“它属于哪一类？”**（主观逻辑）
* **DownsamplingAlgorithm** 解决的是 **“怎么处理它最好？”**（工程实现）

这种三层架构的设计理念是：**解耦**。如果以后你想改进发烧的治疗方案（改算法），你不需要重新定义发烧是什么（不改特征和分类）。
