# SignalFeatures 参数详解与计算示例

## 文档概述

本文档详细说明自适应降采样算法中 `SignalFeatures` 结构体的 **19 个核心参数**，包括每个参数的数学定义、计算公式，并以数据序列
**[1, 2, 3, 10, 11]** 为完整示例进行逐步计算演示。

---

## 示例数据定义

**输入数据序列**：

```
y = [y₀, y₁, y₂, y₃, y₄] = [1, 2, 3, 10, 11]
```

**对应索引**（用于回归分析）：

```
x = [0, 1, 2, 3, 4]
```

**数据点数**：`n = 5`

---

## 参数详解

### 1. mean（均值）

#### 📐 公式

```
mean(均值) = (1/n(样本个数)) × Σ(yᵢ(样本))
```

#### 💻 计算过程

**步骤 1：求和**

```
Σyᵢ = y₀ + y₁ + y₂ + y₃ + y₄
    = 1 + 2 + 3 + 10 + 11
    = 27
```

**步骤 2：除以样本个数**

```
mean(均值) = Σyᵢ(样本总和) / n(样本个数)
          = 27 / 5
          = 5.4
```

#### 📊 结果

```
mean(均值) = 5.4
```

#### 🎯 含义

数据的中心位置，用于确定信号的基准线（Baseline）。

---

### 2. stdDev（标准差）

#### 📐 公式

```
variance(方差) = (1/n(样本个数)) × Σ(yᵢ(样本) - mean(均值))²
stdDev(标准差) = √variance(方差)
```

#### 💻 计算过程

**步骤 1：计算每个点的偏差**

```
* y₀ - mean = 1 - 5.4 = -4.4
* y₁ - mean = 2 - 5.4 = -3.4
* y₂ - mean = 3 - 5.4 = -2.4
* y₃ - mean = 10 - 5.4 = 4.6
* y₄ - mean = 11 - 5.4 = 5.6
```

**步骤 2：平方并求和**

```
Σ(yᵢ - mean)² = (-4.4)² + (-3.4)² + (-2.4)² + (4.6)² + (5.6)²
              = 19.36 + 11.56 + 5.76 + 21.16 + 31.36
              = 89.2
```

**步骤 3：计算方差**

```
variance(方差) = Σ(yᵢ - mean)² / n(样本个数)
              = 89.2 / 5
              = 17.84
```

**步骤 4：开方得到标准差**

```
stdDev(标准差) = √variance(方差)
              = √17.84
              ≈ 4.224
```

#### 📊 结果

```
stdDev(标准差) ≈ 4.224
```

#### 🎯 含义

衡量数据相对于均值的离散程度，值越大说明波动越剧烈。

---

### 3. range（值域）

#### 📐 公式

```
range(值域) = max(y)(最大值) - min(y)(最小值)
```

#### 💻 计算过程

**步骤 1：找出最大值和最小值**

```
数据序列：[1, 2, 3, 10, 11]
max(y)(最大值) = 11
min(y)(最小值) = 1
```

**步骤 2：计算差值**

```
range(值域) = 11 - 1 = 10
```

#### 📊 结果

```
range(值域) = 10
```

#### 🎯 含义

信号的物理跨度，反映数据在垂直方向上的覆盖范围。

---

### 4. volatility（波动率）

#### 📐 公式

```
totalDistance(总行程) = Σ|yᵢ(当前值) - yᵢ₋₁(前一个值)|
volatility(波动率) = totalDistance(总行程) / range(值域)
```

#### 💻 计算过程

**步骤 1：计算相邻点的绝对差值**

```
* |y₁ - y₀| = |2 - 1| = 1
* |y₂ - y₁| = |3 - 2| = 1
* |y₃ - y₂| = |10 - 3| = 7
* |y₄ - y₃| = |11 - 10| = 1
```

**步骤 2：求和得到总行程**

```
totalDistance(总行程) = 1 + 1 + 7 + 1 = 10
```

**步骤 3：除以值域**

```
volatility(波动率) = totalDistance(总行程) / range(值域)
                  = 10 / 10
                  = 1.0
```

#### 📊 结果

```
volatility(波动率) = 1.0
```

#### 🎯 含义

信号的总行程（累计变化量）相对于值域的比率。值越大说明信号越"曲折"。

---

### 5. normalizedVolatility（归一化波动率）⭐

#### 前置步骤 A：线性回归

**公式**：

```
slope(斜率) = [n(样本数)×Σ(x×y) - Σx×Σy] / [n(样本数)×Σx² - (Σx)²]
intercept(截距) = [Σy - slope(斜率)×Σx] / n(样本数)
```

**步骤 1：计算所需的中间值**

```
Σx = 0 + 1 + 2 + 3 + 4 = 10
Σy = 1 + 2 + 3 + 10 + 11 = 27
Σxy = (0×1) + (1×2) + (2×3) + (3×10) + (4×11)
    = 0 + 2 + 6 + 30 + 44
    = 82
Σx² = 0² + 1² + 2² + 3² + 4²
    = 0 + 1 + 4 + 9 + 16
    = 30
```

**步骤 2：计算斜率**

```
分子 = n×Σxy - Σx×Σy
    = 5×82 - 10×27
    = 410 - 270
    = 140

分母 = n×Σx² - (Σx)²
    = 5×30 - 10²
    = 150 - 100
    = 50

slope(斜率) = 140 / 50 = 2.8
```

**步骤 3：计算截距**

```
intercept(截距) = (Σy - slope×Σx) / n
               = (27 - 2.8×10) / 5
               = (27 - 28) / 5
               = -1 / 5
               = -0.2
```

**步骤 4：计算拟合值和残差**

趋势线方程：`ŷ = 2.8x - 0.2`

```
* i=0: ŷ₀ = 2.8×0 - 0.2 = -0.2,  残差 r₀ = 1 - (-0.2) = 1.2
* i=1: ŷ₁ = 2.8×1 - 0.2 = 2.6,   残差 r₁ = 2 - 2.6 = -0.6
* i=2: ŷ₂ = 2.8×2 - 0.2 = 5.4,   残差 r₂ = 3 - 5.4 = -2.4
* i=3: ŷ₃ = 2.8×3 - 0.2 = 8.2,   残差 r₃ = 10 - 8.2 = 1.8
* i=4: ŷ₄ = 2.8×4 - 0.2 = 11.0,  残差 r₄ = 11 - 11.0 = 0.0
```

残差序列：`r = [1.2, -0.6, -2.4, 1.8, 0]`

#### 前置步骤 B：计算归一化波动率

**公式**：

```
normalizedDiff(归一化差分)ᵢ = |rᵢ(当前残差) - rᵢ₋₁(前一个残差)| / avg(|rᵢ₋₁|, |rᵢ|)(平均绝对值)
normalizedVolatility(归一化波动率) = (1/(n-1)) × Σ normalizedDiffᵢ
```

**步骤 1：计算每对相邻残差的归一化差分**

**i=1**：

```
|r₁ - r₀| = |-0.6 - 1.2| = |-1.8| = 1.8
avg(|r₀|, |r₁|) = (|1.2| + |-0.6|) / 2 = (1.2 + 0.6) / 2 = 0.9
normalizedDiff₁ = 1.8 / 0.9 = 2.0
```

**i=2**：

```
|r₂ - r₁| = |-2.4 - (-0.6)| = |-1.8| = 1.8
avg(|r₁|, |r₂|) = (|-0.6| + |-2.4|) / 2 = (0.6 + 2.4) / 2 = 1.5
normalizedDiff₂ = 1.8 / 1.5 = 1.2
```

**i=3**：

```
|r₃ - r₂| = |1.8 - (-2.4)| = |4.2| = 4.2
avg(|r₂|, |r₃|) = (|-2.4| + |1.8|) / 2 = (2.4 + 1.8) / 2 = 2.1
normalizedDiff₃ = 4.2 / 2.1 = 2.0
```

**i=4**：

```
|r₄ - r₃| = |0 - 1.8| = |-1.8| = 1.8
avg(|r₃|, |r₄|) = (|1.8| + |0|) / 2 = (1.8 + 0) / 2 = 0.9
normalizedDiff₄ = 1.8 / 0.9 = 2.0
```

**步骤 2：求平均值**

```
normalizedVolatility(归一化波动率) = (normalizedDiff₁ + normalizedDiff₂ + normalizedDiff₃ + normalizedDiff₄) / (n-1)
                                  = (2.0 + 1.2 + 2.0 + 2.0) / 4
                                  = 7.2 / 4
                                  = 1.8
```

#### 📊 结果

```
normalizedVolatility(归一化波动率) = 1.8
```

#### 🎯 含义

**核心指标**。衡量去趋势后信号的相对波动强度，对振幅不敏感，是判断信号活跃度的关键依据。

---

### 6. flatness（平坦度）

#### 📐 公式

```
flatness(平坦度) = stdDev(标准差) / range(值域)
```

#### 💻 计算过程

**步骤 1：使用已计算的值**

```
stdDev(标准差) = 4.224（来自参数2）
range(值域) = 10（来自参数3）
```

**步骤 2：相除**

```
flatness(平坦度) = 4.224 / 10 = 0.4224 ≈ 0.422
```

#### 📊 结果

```
flatness(平坦度) ≈ 0.422
```

#### 🎯 含义

标准差与值域的比值。值接近 0 表示信号非常平滑，接近 1 表示信号剧烈震荡。

---

### 7. linearity（线性度）

#### 📐 公式

```
SSres(残差平方和) = Σ(yᵢ(实际值) - ŷᵢ(拟合值))²
SStot(总平方和) = Σ(yᵢ(实际值) - mean(均值))²
R²(决定系数) = 1 - SSres(残差平方和) / SStot(总平方和)
linearity(线性度) = R²
```

#### 💻 计算过程

**步骤 1：计算残差平方和 SSres**

使用参数5中已计算的残差：`r = [1.2, -0.6, -2.4, 1.8, 0]`

```
SSres = r₀² + r₁² + r₂² + r₃² + r₄²
      = (1.2)² + (-0.6)² + (-2.4)² + (1.8)² + (0)²
      = 1.44 + 0.36 + 5.76 + 3.24 + 0
      = 10.8
```

**步骤 2：计算总平方和 SStot**

使用参数2中已计算的偏差平方和：

```
SStot = Σ(yᵢ - mean)²
      = 89.2（来自参数2的步骤2）
```

**步骤 3：计算R²**

```
R² = 1 - SSres / SStot
   = 1 - 10.8 / 89.2
   = 1 - 0.121
   = 0.879
```

**步骤 4：得到线性度**

```
linearity(线性度) = R² = 0.879
```

#### 📊 结果

```
linearity(线性度) ≈ 0.879
```

#### 🎯 含义

值越接近 1.0，说明数据越趋于线性关系。高线性度信号可用极少的点表示。

---

### 8. periodicity（周期性强度）

#### 📐 公式

```
对残差序列在不同滞后量(lag)下计算自相关系数：
autocorr(lag) = Σ[(rᵢ - r̄)(rᵢ₊ₗₐ𝓰 - r̄)] / Σ(rᵢ - r̄)²
periodicity(周期性强度) = max(autocorr(lag))（扫描所有lag后的最大值）
```

#### 💻 计算过程

**步骤 1：残差序列归一化**

```
残差序列：r = [1.2, -0.6, -2.4, 1.8, 0]
r̄(残差均值) = (1.2 - 0.6 - 2.4 + 1.8 + 0) / 5 = 0
```

**步骤 2：计算不同lag的自相关**

由于数据点数仅5个，可扫描的lag范围有限（通常 lag < n/3）。

**lag=1 时**：

```
可配对数据：(r₀,r₁), (r₁,r₂), (r₂,r₃), (r₃,r₄)
分子 = (1.2-0)(-0.6-0) + (-0.6-0)(-2.4-0) + (-2.4-0)(1.8-0) + (1.8-0)(0-0)
    = 1.2×(-0.6) + (-0.6)×(-2.4) + (-2.4)×1.8 + 1.8×0
    = -0.72 + 1.44 - 4.32 + 0
    = -3.6

分母 = Σ(rᵢ - r̄)²
    = 1.2² + (-0.6)² + (-2.4)² + 1.8² + 0²
    = 10.8

autocorr(1) = -3.6 / 10.8 ≈ -0.333
```

**步骤 3：判断周期性**

对于非周期序列，所有lag的自相关系数都较低（< 0.3阈值）。

```
periodicity(周期性强度) ≈ 0
```

#### 📊 结果

```
periodicity(周期性强度) ≈ 0
```

#### 🎯 含义

值越高说明信号具有越明显的重复规律（如正弦波）。此序列为非周期信号。

---

### 9. autocorrelation（自相关系数）

#### 📐 公式

```
对于给定的lag值：
autocorr(lag) = Σ[(yᵢ - mean)(yᵢ₊ₗₐ𝓰 - mean)] / Σ(yᵢ - mean)²
```

#### 💻 计算过程（lag = 1）

**步骤 1：计算偏差乘积的和（分子）**

```
可配对数据：(y₀,y₁), (y₁,y₂), (y₂,y₃), (y₃,y₄)

* (y₀ - mean)(y₁ - mean) = (1 - 5.4)(2 - 5.4) = (-4.4)(-3.4) = 14.96
* (y₁ - mean)(y₂ - mean) = (2 - 5.4)(3 - 5.4) = (-3.4)(-2.4) = 8.16
* (y₂ - mean)(y₃ - mean) = (3 - 5.4)(10 - 5.4) = (-2.4)(4.6) = -11.04
* (y₃ - mean)(y₄ - mean) = (10 - 5.4)(11 - 5.4) = (4.6)(5.6) = 25.76

分子 = 14.96 + 8.16 + (-11.04) + 25.76 = 37.84
```

**步骤 2：计算偏差平方和（分母）**

```
分母 = Σ(yᵢ - mean)² = 89.2（来自参数2）
```

**步骤 3：相除**

```
autocorrelation(自相关系数) = 37.84 / 89.2 ≈ 0.424
```

#### 📊 结果

```
autocorrelation(自相关系数) ≈ 0.424
```

#### 🎯 含义

衡量信号与其自身在延迟后的相似度，辅助判断信号的自相关特性。

---

### 10. stepCount（阶跃次数）

#### 📐 公式

```
步骤1：计算一阶导数 dᵢ = |yᵢ₊₁ - yᵢ|
步骤2：计算导数的均值 mean_d 和标准差 std_d
步骤3：设定阈值 threshold = mean_d + 3×std_d
步骤4：统计满足 dᵢ > threshold 且 dᵢ > 0.01 的点数
```

#### 💻 计算过程

**步骤 1：计算一阶导数**

```
* d₀ = |y₁ - y₀| = |2 - 1| = 1
* d₁ = |y₂ - y₁| = |3 - 2| = 1
* d₂ = |y₃ - y₂| = |10 - 3| = 7
* d₃ = |y₄ - y₃| = |11 - 10| = 1

导数序列：d = [1, 1, 7, 1]
```

**步骤 2：计算导数的均值**

```
mean_d = (1 + 1 + 7 + 1) / 4 = 10 / 4 = 2.5
```

**步骤 3：计算导数的方差和标准差**

```
* (d₀ - mean_d)² = (1 - 2.5)² = (-1.5)² = 2.25
* (d₁ - mean_d)² = (1 - 2.5)² = (-1.5)² = 2.25
* (d₂ - mean_d)² = (7 - 2.5)² = (4.5)² = 20.25
* (d₃ - mean_d)² = (1 - 2.5)² = (-1.5)² = 2.25

Σ(dᵢ - mean_d)² = 2.25 + 2.25 + 20.25 + 2.25 = 27

var_d(方差) = 27 / 4 = 6.75
std_d(标准差) = √6.75 ≈ 2.598
```

**步骤 4：计算阈值**

```
threshold(阈值) = mean_d + 3×std_d
               = 2.5 + 3×2.598
               = 2.5 + 7.794
               = 10.294
```

**步骤 5：统计超过阈值的点数**

```
检查每个导数值：
* d₀ = 1 < 10.294 ✗
* d₁ = 1 < 10.294 ✗
* d₂ = 7 < 10.294 ✗
* d₃ = 1 < 10.294 ✗

stepCount(阶跃次数) = 0
```

#### 📊 结果

```
stepCount(阶跃次数) = 0
```

#### 🎯 含义

检测信号中显著的阶跃变化次数。此序列虽有较大跳变（3→10），但在统计上未达到阈值标准。

---

### 11. trendSlope（趋势斜率）

#### 📐 公式

```
即线性回归的斜率（已在参数5中计算）
trendSlope(趋势斜率) = slope(斜率)
```

#### 💻 计算过程

```
trendSlope(趋势斜率) = 2.8（来自参数5）
```

#### 📊 结果

```
trendSlope(趋势斜率) = 2.8
```

#### 🎯 含义

反映信号的宏观上升或下降趋势，正值表示上升，负值表示下降。此信号呈上升趋势。

---

### 12. noiseRatio（噪声比）

#### 📐 公式

```
smoothChange(二阶导数绝对值和) = Σ|yᵢ₊₁ - 2yᵢ + yᵢ₋₁|
totalChange(总变化) = Σ|yᵢ₊₁ - yᵢ₋₁|
noiseRatio(噪声比) = smoothChange / totalChange
```

#### 💻 计算过程

**步骤 1：计算每个内部点的二阶导数绝对值**

**i=1**：

```
|y₂ - 2y₁ + y₀| = |3 - 2×2 + 1| = |3 - 4 + 1| = |0| = 0
```

**i=2**：

```
|y₃ - 2y₂ + y₁| = |10 - 2×3 + 2| = |10 - 6 + 2| = |6| = 6
```

**i=3**：

```
|y₄ - 2y₃ + y₂| = |11 - 2×10 + 3| = |11 - 20 + 3| = |-6| = 6
```

**步骤 2：求和得到 smoothChange**

```
smoothChange(二阶导数绝对值和) = 0 + 6 + 6 = 12
```

**步骤 3：计算总变化**

**i=1**：

```
|y₂ - y₀| = |3 - 1| = 2
```

**i=2**：

```
|y₃ - y₁| = |10 - 2| = 8
```

**i=3**：

```
|y₄ - y₂| = |11 - 3| = 8
```

**步骤 4：求和得到 totalChange**

```
totalChange(总变化) = 2 + 8 + 8 = 18
```

**步骤 5：计算噪声比**

```
noiseRatio(噪声比) = smoothChange / totalChange
                  = 12 / 18
                  = 0.667
```

#### 📊 结果

```
noiseRatio(噪声比) ≈ 0.667
```

#### 🎯 含义

通过二阶导数（加速度）衡量高频噪声的占比，值越高说明信号越"抖动"。

---

### 13. zeroCrossings（过零次数）

#### 📐 公式

```
统计信号穿过基准线（mean）的次数
即统计符号变化的次数
```

#### 💻 计算过程

**步骤 1：计算每个点相对于均值的偏差及符号**

```
mean(均值) = 5.4（来自参数1）

* y₀ - mean = 1 - 5.4 = -4.4  → 符号：负(-)
* y₁ - mean = 2 - 5.4 = -3.4  → 符号：负(-)
* y₂ - mean = 3 - 5.4 = -2.4  → 符号：负(-)
* y₃ - mean = 10 - 5.4 = 4.6  → 符号：正(+)
* y₄ - mean = 11 - 5.4 = 5.6  → 符号：正(+)
```

**步骤 2：检测符号变化**

```
符号序列：[-, -, -, +, +]

* 从 y₀ 到 y₁：符号不变（- → -）
* 从 y₁ 到 y₂：符号不变（- → -）
* 从 y₂ 到 y₃：符号变化（- → +）✓
* 从 y₃ 到 y₄：符号不变（+ → +）

符号变化次数 = 1
```

**步骤 3：得到过零次数**

```
zeroCrossings(过零次数) = 1
```

#### 📊 结果

```
zeroCrossings(过零次数) = 1
```

#### 🎯 含义

反映信号在均值上下振荡的频率，辅助判断高频特性。

---

### 14. maxAbsDerivative（最大绝对导数）

#### 📐 公式

```
maxAbsDerivative(最大绝对导数) = max(|yᵢ - yᵢ₋₁|)
```

#### 💻 计算过程

**步骤 1：计算所有一阶导数（已在参数10计算）**

```
一阶导数序列：d = [1, 1, 7, 1]
```

**步骤 2：找出最大值**

```
maxAbsDerivative(最大绝对导数) = max(1, 1, 7, 1) = 7
```

#### 📊 结果

```
maxAbsDerivative(最大绝对导数) = 7
```

#### 🎯 含义

捕捉信号的最大瞬时变化率，用于识别脉冲或阶跃的"陡峭度"。此处最大跳变发生在 y₂→y₃（3→10）。

---

### 15. estimatedPeriod（预估周期）

#### 📐 公式

```
通过周期性检测（参数8）得到的周期长度（单位：点数）
estimatedPeriod(预估周期) = argmax(autocorr(lag))（使自相关最大的lag值）
```

#### 💻 计算过程

**步骤 1：回顾周期性检测结果**

```
periodicity(周期性强度) ≈ 0（来自参数8）
```

**步骤 2：判断**

```
由于周期性强度低于阈值（通常 < 0.3），
说明信号不具有显著的周期性特征。
```

**步骤 3：得到预估周期**

```
estimatedPeriod(预估周期) = 0（表示无周期）
```

#### 📊 结果

```
estimatedPeriod(预估周期) = 0
```

#### 🎯 含义

仅在 periodicity 高时有效，表示信号的重复周期。此序列为非周期信号。

---

### 16. residualStdDev（残差标准差）

#### 📐 公式

```
残差序列：r = [r₀, r₁, r₂, r₃, r₄]
r̄(残差均值) = (Σrᵢ) / n
residualStdDev(残差标准差) = √[Σ(rᵢ - r̄)² / n]
```

#### 💻 计算过程

**步骤 1：使用参数5中的残差序列**

```
r = [1.2, -0.6, -2.4, 1.8, 0]
```

**步骤 2：计算残差均值**

```
r̄ = (1.2 + (-0.6) + (-2.4) + 1.8 + 0) / 5
  = 0 / 5
  = 0
```

**步骤 3：计算残差平方和**

```
* (r₀ - r̄)² = (1.2 - 0)² = 1.44
* (r₁ - r̄)² = (-0.6 - 0)² = 0.36
* (r₂ - r̄)² = (-2.4 - 0)² = 5.76
* (r₃ - r̄)² = (1.8 - 0)² = 3.24
* (r₄ - r̄)² = (0 - 0)² = 0

Σ(rᵢ - r̄)² = 1.44 + 0.36 + 5.76 + 3.24 + 0 = 10.8
```

**步骤 4：计算方差**

```
var_r(残差方差) = 10.8 / 5 = 2.16
```

**步骤 5：开方得到标准差**

```
residualStdDev(残差标准差) = √2.16 ≈ 1.47
```

#### 📊 结果

```
residualStdDev(残差标准差) ≈ 1.47
```

#### 🎯 含义

衡量移除线性趋势后的纯波动幅度。

---

### 17. detrendedRange（去趋势值域）

#### 📐 公式

```
detrendedRange(去趋势值域) = max(r)(残差最大值) - min(r)(残差最小值)
```

#### 💻 计算过程

**步骤 1：使用参数5中的残差序列**

```
r = [1.2, -0.6, -2.4, 1.8, 0]
```

**步骤 2：找出最大值和最小值**

```
max(r) = 1.8
min(r) = -2.4
```

**步骤 3：计算差值**

```
detrendedRange(去趋势值域) = 1.8 - (-2.4)
                          = 1.8 + 2.4
                          = 4.2
```

#### 📊 结果

```
detrendedRange(去趋势值域) = 4.2
```

#### 🎯 含义

去除趋势后信号的物理跨度，反映纯粹的波动范围。

---

### 18. trendStrength（趋势强度）

#### 📐 公式

```
trendStrength(趋势强度) = min(1.0, |slope(斜率)| × n(样本数) / (range(值域) + ε))
```

其中 ε 是一个极小值（防止除零），通常取 1e-6。

#### 💻 计算过程

**步骤 1：使用已计算的值**

```
slope(斜率) = 2.8（来自参数5）
n(样本数) = 5
range(值域) = 10（来自参数3）
```

**步骤 2：计算分子**

```
|slope| × n = |2.8| × 5 = 2.8 × 5 = 14
```

**步骤 3：计算比值**

```
14 / 10 = 1.4
```

**步骤 4：取最小值**

```
trendStrength(趋势强度) = min(1.0, 1.4) = 1.0
```

#### 📊 结果

```
trendStrength(趋势强度) = 1.0
```

#### 🎯 含义

趋势对信号整体幅度的贡献占比（0~1），值越高说明信号主要体现为上升/下降趋势。此信号趋势特征极强（达到上限1.0）。

---

### 19. envelopeGrowthRatio（包络增长率）

#### 📐 公式

```
envelopeGrowthRatio(包络增长率) = min(10.0, range(值域) / (detrendedRange(去趋势值域) + ε))
```

其中 ε 是一个极小值（防止除零），通常取 1e-6。

#### 💻 计算过程

**步骤 1：使用已计算的值**

```
range(值域) = 10（来自参数3）
detrendedRange(去趋势值域) = 4.2（来自参数17）
```

**步骤 2：计算比值**

```
10 / 4.2 ≈ 2.38
```

**步骤 3：取最小值**

```
envelopeGrowthRatio(包络增长率) = min(10.0, 2.38) = 2.38
```

#### 📊 结果

```
envelopeGrowthRatio(包络增长率) ≈ 2.38
```

#### 🎯 含义

信号振幅随时间变化的增长比率，专门用于识别"喇叭口"形状的调幅信号。值 > 1.5 提示可能存在幅度增长特征。

---

## 完整结果汇总表

| 序号 | 参数名称     | 英文名称                 | 计算值   | 单位 | 关键特性        |
|:--:|:---------|:---------------------|:------|:---|:------------|
| 1  | 均值       | mean                 | 5.4   | -  | 基准线         |
| 2  | 标准差      | stdDev               | 4.224 | -  | 离散度         |
| 3  | 值域       | range                | 10    | -  | 物理跨度        |
| 4  | 波动率      | volatility           | 1.0   | -  | 曲折度         |
| 5  | 归一化波动率 ⭐ | normalizedVolatility | 1.8   | -  | **核心活跃度指标** |
| 6  | 平坦度      | flatness             | 0.422 | -  | 平滑度         |
| 7  | 线性度      | linearity            | 0.879 | -  | 线性拟合优度      |
| 8  | 周期性强度    | periodicity          | ~0    | -  | 周期性         |
| 9  | 自相关系数    | autocorrelation      | 0.424 | -  | 自相关性        |
| 10 | 阶跃次数     | stepCount            | 0     | 次  | 阶跃次数        |
| 11 | 趋势斜率     | trendSlope           | 2.8   | -  | 趋势斜率        |
| 12 | 噪声比      | noiseRatio           | 0.667 | -  | 高频噪声占比      |
| 13 | 过零次数     | zeroCrossings        | 1     | 次  | 过零次数        |
| 14 | 最大绝对导数   | maxAbsDerivative     | 7     | -  | 最大瞬时变化率     |
| 15 | 预估周期     | estimatedPeriod      | 0     | 点数 | 预估周期长度      |
| 16 | 残差标准差    | residualStdDev       | 1.47  | -  | 去趋势波动幅度     |
| 17 | 去趋势值域    | detrendedRange       | 4.2   | -  | 去趋势跨度       |
| 18 | 趋势强度     | trendStrength        | 1.0   | -  | 趋势主导程度      |
| 19 | 包络增长率    | envelopeGrowthRatio  | 2.38  | -  | 振幅增长率       |

---

## 信号分类结果

基于上述参数，该示例序列 [1, 2, 3, 10, 11] 的特征分析：

- **线性度**：0.879（较高）
- **趋势强度**：1.0（极强）
- **周期性**：~0（无周期）
- **噪声比**：0.667（中等）
- **阶跃检测**：0（统计上未达到阈值）

**预测分类**：`SignalType.TREND_NOISE` 或 `SignalType.LINEAR`

该信号主要表现为**带有局部波动的线性上升趋势**。

---

## 应用场景

这19个参数共同构成信号的"数学指纹"，系统据此可以：

1. **智能选择降采样算法**：
    - 高线性度 → 使用 LTTB
    - 高周期性 → 使用 HYBRID_ENVELOPE
    - 高噪声比 → 使用 UNIFORM_WITH_EXTREMES

2. **动态分配采样配额**：
    - 高 normalizedVolatility 的窗口 → 分配更多点数
    - 平坦区域（低 flatness）→ 最小化采样

3. **极值保护策略**：
    - 检测到阶跃（stepCount > 0）→ 强制保留突变点
    - 高 maxAbsDerivative → 保护陡峭区域

---

## 文档版本

- **版本号**：v1.0
- **创建日期**：2026-01-08
- **适用算法版本**：AdaptiveDownsamplingSelector v5.0

---

## 附录：关键公式速查

```
均值          mean = Σyᵢ / n
标准差        stdDev = √[(Σyᵢ² / n) - mean²]
值域          range = max(y) - min(y)
波动率        volatility = Σ|Δyᵢ| / range
线性度        R² = 1 - SSres / SStot
趋势斜率      slope = (nΣxy - ΣxΣy) / (nΣx² - (Σx)²)
噪声比        noiseRatio = Σ|yᵢ₊₁ - 2yᵢ + yᵢ₋₁| / Σ|yᵢ₊₁ - yᵢ₋₁|
趋势强度      trendStrength = min(1.0, |slope|×n / range)
```

---

**文档结束**
